# Gemini Nodes for ComfyUI

ä¸€ä¸ªç”¨äº ComfyUI çš„è‡ªå®šä¹‰èŠ‚ç‚¹åŒ…ï¼Œæ”¯æŒä½¿ç”¨ Google Gemini API ç”Ÿæˆå›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ **å›¾ç‰‡ç”Ÿæˆ**: ä½¿ç”¨ Google Gemini å¼ºå¤§çš„å›¾ç‰‡ç”Ÿæˆèƒ½åŠ›
- ğŸ“¸ **å¤šå›¾è¾“å…¥**: æ”¯æŒæœ€å¤š 5 å¼ å¯é€‰è¾“å…¥å›¾ç‰‡ï¼Œå®ç°å›¾ç”Ÿå›¾åŠŸèƒ½
- ğŸ“ **çµæ´»çš„å®½é«˜æ¯”**: æ”¯æŒå¸¸è§å®½é«˜æ¯” (1:1, 16:9, 9:16, 4:3, 3:4, 3:2, 2:3, 21:9, 9:21)
- ğŸ–¼ï¸ **å¤šç§è¾“å‡ºå°ºå¯¸**: æ”¯æŒ 1Kã€2Kã€4K å›¾ç‰‡å°ºå¯¸
- ğŸ”„ **Seed æ§åˆ¶**: ä½¿ç”¨ seed å‚æ•°æ§åˆ¶å·¥ä½œæµæ˜¯å¦é‡æ–°æ‰§è¡Œ
- ğŸ“Š **è¯¦ç»†è¾“å‡º**: è·å–å®Œæ•´çš„ç”Ÿæˆä¿¡æ¯ï¼ŒåŒ…æ‹¬æ—¶é—´ç»Ÿè®¡

## å®‰è£…æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šComfyUI Managerï¼ˆæ¨èï¼‰

åœ¨ ComfyUI Manager ä¸­æœç´¢ "Gemini Nodes" å¹¶å®‰è£…ã€‚

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…

1. è¿›å…¥ ComfyUI çš„ custom_nodes ç›®å½•ï¼š
   ```bash
   cd ComfyUI/custom_nodes/
   ```

2. å…‹éš†æˆ–å¤åˆ¶æœ¬ä»“åº“ï¼š
   ```bash
   git clone https://github.com/your-repo/Gemini-nodes.git
   ```

3. å®‰è£…ä¾èµ–ï¼š
   ```bash
   cd Gemini-nodes
   pip install -r requirements.txt
   ```

4. é‡å¯ ComfyUI

## é…ç½®è¯´æ˜

### API Key è®¾ç½®

æœ¬èŠ‚ç‚¹ä»ç¯å¢ƒå˜é‡ `GEMINI_API_KEY` è·å– API Keyï¼Œè¯·åœ¨å¯åŠ¨ ComfyUI ä¹‹å‰è®¾ç½®ï¼š

**Linux / macOS:**
```bash
export GEMINI_API_KEY="your-api-key-here"
```

**Windows (CMD):**
```cmd
set GEMINI_API_KEY=your-api-key-here
```

**Windows (PowerShell):**
```powershell
$env:GEMINI_API_KEY="your-api-key-here"
```

è·å– API Key è¯·è®¿é—® [Google AI Studio](https://aistudio.google.com/app/apikey)ã€‚

## èŠ‚ç‚¹è¯´æ˜

### Gemini Image Generator

ä½¿ç”¨ Google Gemini API ç”Ÿæˆå›¾ç‰‡ï¼Œæ”¯æŒå¯é€‰çš„è¾“å…¥å›¾ç‰‡ã€‚

#### è¾“å…¥å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `prompt` | STRING | æ˜¯ | å›¾ç‰‡ç”Ÿæˆçš„æ–‡æœ¬æç¤ºè¯ |
| `model` | COMBO | æ˜¯ | æ¨¡å‹é€‰æ‹©ï¼ˆå½“å‰ï¼šgemini-3-pro-image-previewï¼‰ |
| `aspect_ratio` | COMBO | æ˜¯ | è¾“å‡ºå®½é«˜æ¯”ï¼ˆ1:1, 16:9, 9:16 ç­‰ï¼‰ |
| `image_size` | COMBO | æ˜¯ | è¾“å‡ºå°ºå¯¸ï¼ˆ1K, 2K, 4Kï¼‰ |
| `seed` | INT | æ˜¯ | Seed å€¼ï¼Œç”¨äºæ§åˆ¶å·¥ä½œæµ |
| `image_1` | IMAGE | å¦ | å¯é€‰è¾“å…¥å›¾ç‰‡ 1 |
| `image_2` | IMAGE | å¦ | å¯é€‰è¾“å…¥å›¾ç‰‡ 2 |
| `image_3` | IMAGE | å¦ | å¯é€‰è¾“å…¥å›¾ç‰‡ 3 |
| `image_4` | IMAGE | å¦ | å¯é€‰è¾“å…¥å›¾ç‰‡ 4 |
| `image_5` | IMAGE | å¦ | å¯é€‰è¾“å…¥å›¾ç‰‡ 5 |

#### è¾“å‡º

| è¾“å‡º | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `text` | STRING | ç”ŸæˆçŠ¶æ€ã€æ—¶é—´ä¿¡æ¯åŠ API å“åº” |
| `image` | IMAGE | ç”Ÿæˆçš„å›¾ç‰‡å¼ é‡ |

#### è¾“å‡ºæ–‡æœ¬æ ¼å¼

ç”ŸæˆæˆåŠŸæ—¶ï¼š
```
âœ… Image Generation Successful

ğŸ“ Output Size: 1024 x 1024
ğŸ“ Aspect Ratio: 1:1
ğŸ–¼ï¸ Image Size Setting: 1K
ğŸ“¸ Input Images: 0

â±ï¸ Timing:
   â€¢ Image Encoding: 0.000s
   â€¢ API Generation: 5.234s
   â€¢ Image Decoding: 0.015s
   â€¢ Total Time: 5.249s
```

ç”Ÿæˆå¤±è´¥æ—¶ï¼š
```
âŒ Image Generation Failed

No image was generated by the API.

API Response:
[API è¿”å›çš„æ–‡æœ¬å“åº”]
```

## ä½¿ç”¨ç¤ºä¾‹

### æ–‡ç”Ÿå›¾

1. æ·»åŠ  **Gemini Image Generator** èŠ‚ç‚¹
2. è¾“å…¥æç¤ºè¯ï¼ˆä¾‹å¦‚ï¼š"ä¸€å¹…ç¾ä¸½çš„å±±é—´æ—¥è½ç”»é¢"ï¼‰
3. é€‰æ‹©æ‰€éœ€çš„å®½é«˜æ¯”å’Œå°ºå¯¸
4. å°† `image` è¾“å‡ºè¿æ¥åˆ° **Preview Image** æˆ– **Save Image** èŠ‚ç‚¹

### å›¾ç”Ÿå›¾

1. ä½¿ç”¨ **Load Image** èŠ‚ç‚¹åŠ è½½æºå›¾ç‰‡
2. è¿æ¥åˆ° `image_1`ï¼ˆå¯é€‰è¿æ¥ `image_2` åˆ° `image_5`ï¼‰
3. è¾“å…¥æè¿°æ‰€éœ€å˜æ¢çš„æç¤ºè¯
4. è¿è¡Œå·¥ä½œæµ

## æ³¨æ„äº‹é¡¹

- `seed` å‚æ•°ä¸ä¼šç›´æ¥å½±å“ API è¾“å‡ºï¼Œä½†å¯ç”¨äºè§¦å‘å·¥ä½œæµé‡æ–°æ‰§è¡Œ
- å¦‚æœæœªæä¾›æç¤ºè¯ä¸”æœªè¾“å…¥å›¾ç‰‡ï¼ŒèŠ‚ç‚¹å°†è¿”å›é”™è¯¯
- API é”™è¯¯ï¼ˆæ— æ•ˆå¯†é’¥ã€ç½‘ç»œé—®é¢˜ç­‰ï¼‰å°†æ˜¾ç¤ºåœ¨ text è¾“å‡ºä¸­

## å¸¸è§é—®é¢˜

### "GEMINI_API_KEY environment variable is not set"
è¯·ç¡®ä¿åœ¨å¯åŠ¨ ComfyUI å‰è®¾ç½®äº† `GEMINI_API_KEY` ç¯å¢ƒå˜é‡ã€‚

### "Image Generation Failed"
- æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ API é…é¢
- å°è¯•ä¸åŒçš„æç¤ºè¯æˆ–è¾“å…¥å›¾ç‰‡

### æ¨¡å—å¯¼å…¥é”™è¯¯
åœ¨ Gemini-nodes ç›®å½•ä¸‹è¿è¡Œ `pip install -r requirements.txt`

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

### v1.0.0
- é¦–æ¬¡å‘å¸ƒ
- æ”¯æŒ Gemini å›¾ç‰‡ç”Ÿæˆ
- å¤šå›¾è¾“å…¥æ”¯æŒ
- å¯é…ç½®çš„å®½é«˜æ¯”å’Œå°ºå¯¸
